{% extends "base.html" %}

{% block title %}Edit Profile - JobMatch{% endblock %}

{% block content %}
<div class="mb-2">
    <a href="/candidate/dashboard">&larr; Back to Dashboard</a>
</div>

<div style="max-width: 700px;">
    <div class="card">
        <h1>Edit Profile</h1>

        <form action="/candidate/profile" method="POST">
            <div class="grid grid-2">
                <div class="form-group">
                    <label for="first_name">First Name</label>
                    <input type="text" id="first_name" name="first_name"
                           value="{{ candidate.first_name }}" required>
                </div>
                <div class="form-group">
                    <label for="last_name">Last Name</label>
                    <input type="text" id="last_name" name="last_name"
                           value="{{ candidate.last_name }}" required>
                </div>
            </div>

            <div class="form-group">
                <label for="headline">Professional Headline</label>
                <input type="text" id="headline" name="headline"
                       value="{{ candidate.headline or '' }}"
                       placeholder="e.g., Senior Software Engineer | Python & ML Expert">
            </div>

            <div class="form-group">
                <label for="summary">Summary</label>
                <textarea id="summary" name="summary" rows="4"
                          placeholder="Brief overview of your background and career goals...">{{ candidate.summary or '' }}</textarea>
            </div>

            <div class="grid grid-2">
                <div class="form-group">
                    <label for="location">Location</label>
                    <input type="text" id="location" name="location"
                           value="{{ candidate.location or '' }}"
                           placeholder="e.g., San Francisco, CA">
                </div>
                <div class="form-group">
                    <label for="phone">Phone</label>
                    <input type="tel" id="phone" name="phone"
                           value="{{ candidate.phone or '' }}"
                           placeholder="(555) 123-4567">
                </div>
            </div>

            <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid #e5e7eb;">
            <h3>Current Position</h3>

            <div class="grid grid-2">
                <div class="form-group">
                    <label for="current_title">Current Title</label>
                    <input type="text" id="current_title" name="current_title"
                           value="{{ candidate.current_title or '' }}"
                           placeholder="e.g., Software Engineer">
                </div>
                <div class="form-group">
                    <label for="current_company">Current Company</label>
                    <input type="text" id="current_company" name="current_company"
                           value="{{ candidate.current_company or '' }}"
                           placeholder="e.g., Google">
                </div>
            </div>

            <div class="form-group">
                <label for="years_experience">Years of Experience</label>
                <input type="number" id="years_experience" name="years_experience"
                       value="{{ candidate.years_experience|int if candidate.years_experience else '' }}"
                       min="0" max="50" step="1">
            </div>

            <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid #e5e7eb;">
            <h3>Job Preferences</h3>

            <div class="grid grid-2">
                <div class="form-group">
                    <label for="desired_salary_min">Minimum Salary</label>
                    <input type="number" id="desired_salary_min" name="desired_salary_min"
                           value="{{ candidate.desired_salary_min or '' }}"
                           placeholder="80000" min="0" step="1000">
                </div>
                <div class="form-group">
                    <label for="desired_salary_max">Maximum Salary</label>
                    <input type="number" id="desired_salary_max" name="desired_salary_max"
                           value="{{ candidate.desired_salary_max or '' }}"
                           placeholder="150000" min="0" step="1000">
                </div>
            </div>

            <div class="grid grid-2">
                <div class="form-group">
                    <label for="desired_location">Preferred Location</label>
                    <input type="text" id="desired_location" name="desired_location"
                           value="{{ candidate.desired_location or '' }}"
                           placeholder="e.g., New York, Remote">
                </div>
                <div class="form-group">
                    <label for="job_type_preference">Job Type</label>
                    <select id="job_type_preference" name="job_type_preference">
                        <option value="">Any</option>
                        <option value="full-time" {% if candidate.job_type_preference == 'full-time' %}selected{% endif %}>Full-time</option>
                        <option value="part-time" {% if candidate.job_type_preference == 'part-time' %}selected{% endif %}>Part-time</option>
                        <option value="contract" {% if candidate.job_type_preference == 'contract' %}selected{% endif %}>Contract</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" name="open_to_remote" value="true"
                           {% if candidate.open_to_remote %}checked{% endif %}>
                    Open to remote work
                </label>
            </div>

            <div class="form-group">
                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                    <input type="checkbox" name="is_open_to_opportunities" value="true"
                           {% if candidate.is_open_to_opportunities %}checked{% endif %}>
                    Open to new opportunities (visible to recruiters)
                </label>
            </div>

            <hr style="margin: 1.5rem 0; border: none; border-top: 1px solid #e5e7eb;">

            <div class="form-group">
                <label for="resume_text">Resume (paste text)</label>
                <textarea id="resume_text" name="resume_text" rows="8"
                          placeholder="Paste your resume text here for better job matching...">{{ candidate.resume_text or '' }}</textarea>
                <p class="text-small text-muted mt-1">
                    This will be parsed to extract skills and experience.
                </p>
            </div>

            <div class="flex gap-2">
                <button type="submit" class="btn">Save Changes</button>
                <a href="/candidate/dashboard" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
